<div class="alert alert-dismissible alert-primary" *ngIf="!chosen_class">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <h4 class="alert-heading">Retrieving data</h4>
  <p class="mb-0">Data is being retrieved</p>
</div>

<div class="card text-white bg-primary mb-3" style="max-width: 20rem;" *ngIf="chosen_class && !no_result">
  <div class="card-header">Class information</div>
  <div class="card-body">
    <h4 class="card-title">
      {{chosen_class.name}}
    </h4>
    {{chosen_class.long_desc}}<br/><br/>
    <i>{{chosen_class.multiclass_req}}</i>
    <div [innerHTML]="chosen_class.level_table"></div>
    <h3>Hit points:</h3>
    <b>Hit dice:</b> {{chosen_class.hit_dice}}<br/>
    <b>Hit points at level 1:</b> {{chosen_class.hit_points_lvl_1}}<br/>
    <b>Hit points at higher level:</b> {{chosen_class.hit_points_higher_lvl}}<br/><br/>
    <h3>Proficiencies:</h3>
    <b>Armor:</b> {{chosen_class.prof_armor}}<br/>
    <b>Weapons:</b> {{chosen_class.prof_weapons}}<br/>
    <b>Tools:</b> {{chosen_class.prof_tools}}<br/>
    <b>Saving throws:</b> {{chosen_class.prof_saving_throws}}<br/>
    <b>Skills:</b> {{chosen_class.prof_skills}}<br/><br/>
    <h3>Equipment</h3>
    <div [innerHTML]="chosen_class.equipment"></div>
    <b>Source:</b> {{chosen_class.source}}
  </div>
</div>

<div *ngIf="no_result" class="card text-white bg-primary mb-3" style="max-width: 1200px">
  <div class="card-header">
    <h2 class="card-title">Create a new class</h2>
  </div>
  <div *ngIf="!discord.is_admin" class="card-body">
    Login to add a new class to the website
  </div>
  <div *ngIf="discord.is_admin" class="card-body">
    <form [formGroup]="channelForm">
      <!-- Name data -->
      <div class="row">
        <div class="col wlimit">
          Name:
        </div>
        <div class="col">
          <input type="text" formControlName="name" class="form-control" placeholder="Class name">
        </div>
      </div>

      <!-- Short description -->
      <div class="row">
        <div class="col wlimit">
          Short description:
        </div>
        <div class="col">
          <textarea type="text" formControlName="short_desc" class="form-control" rows="3"
                    placeholder="Short description"></textarea>
        </div>
      </div>

      <!-- Long description -->
      <div class="row">
        <div class="col wlimit">
          Long description:
        </div>
        <div class="col">
          <textarea type="text" formControlName="long_desc" class="form-control" rows="8"
                    placeholder="Long description"></textarea>
        </div>
      </div>

      <!-- Multiclass requirements -->
      <div class="row">
        <div class="col wlimit">
          Multiclass requirements:
        </div>
        <div class="col">
          <textarea type="text" formControlName="multiclass_req" class="form-control" rows="2"
                    placeholder="Multiclass requirements"></textarea>
        </div>
      </div>

      <!-- Level table -->
      <div class="row">
        <div class="col wlimit">
          Level table:
        </div>
        <div class="col">
          <textarea type="text" formControlName="level_table" class="form-control" rows="22"
                    placeholder="Level table"></textarea>
        </div>
      </div>

      <!-- Hit dice -->
      <div class="row">
        <div class="col wlimit">
          Hit dice:
        </div>
        <div class="col">
          <input type="text" formControlName="hit_dice" class="form-control" placeholder="Hit dice">
        </div>
      </div>

      <!-- Hit points -->
      <div class="row">
        <div class="col wlimit">
          Hit points at level 1:
        </div>
        <div class="col">
          <input type="text" formControlName="hit_points_lvl_1" class="form-control" placeholder="Hit points">
        </div>
      </div>
      <div class="row">
        <div class="col wlimit">
          Hit points at higher levels:
        </div>
        <div class="col">
          <input type="text" formControlName="hit_points_higher_lvl" class="form-control" placeholder="Hit points">
        </div>
      </div>

      <!-- Proficiencies -->
      <div class="row">
        <div class="col wlimit">
          Proficiencies (Armor):
        </div>
        <div class="col">
          <input type="text" formControlName="prof_armor" class="form-control" placeholder="Armor">
        </div>
      </div>
      <div class="row">
        <div class="col wlimit">
          Proficiencies (Weapons):
        </div>
        <div class="col">
          <input type="text" formControlName="prof_weapons" class="form-control" placeholder="Weapons">
        </div>
      </div>
      <div class="row">
        <div class="col wlimit">
          Proficiencies (Tools):
        </div>
        <div class="col">
          <input type="text" formControlName="prof_tools" class="form-control" placeholder="Tools">
        </div>
      </div>
      <div class="row">
        <div class="col wlimit">
          Proficiencies (Saving throws):
        </div>
        <div class="col">
          <input type="text" formControlName="prof_saving_throws" class="form-control" placeholder="Saving throws">
        </div>
      </div>
      <div class="row">
        <div class="col wlimit">
          Proficiencies (Skills):
        </div>
        <div class="col">
          <input type="text" formControlName="prof_skills" class="form-control" placeholder="Skills">
        </div>
      </div>

      <!-- Equipment -->
      <div class="row">
        <div class="col wlimit">
          Equipment:
        </div>
        <div class="col">
          <textarea type="text" formControlName="equipment" class="form-control" rows="4"
                    placeholder="Equipment"></textarea>
        </div>
      </div>

      <!-- Source -->
      <div class="row">
        <div class="col wlimit">
          Source:
        </div>
        <div class="col">
          <select formControlName="source" class="custom-select">
            <option [value]="s.id" *ngFor="let s of sources">{{s.name}}</option>
          </select>
        </div>
      </div>

      <!-- ID overwrite -->
      <div class="row">
        <div class="col wlimit">
          ID overwrite:
        </div>
        <div class="col">
          <input type="text" formControlName="id" class="form-control" placeholder="ID to overwrite">
        </div>
      </div>

      <!-- Save data button -->
      <div class="row">
        <button type="button" (click)="saveNewClass()" class="btn btn-primary"
                style="width: 40%; margin: 10px 30% 0 30%;">
          Save changes
        </button>
      </div>

      <!-- Let the user know saving succeeded -->
      <div class="row">
        <div *ngIf="error===false" class="col alert alert-dismissible alert-success">
          Data successfully saved
        </div>
        <div *ngIf="error===true" class="col alert alert-dismissible alert-warning">
          Data saving failed
        </div>
      </div>
    </form>
  </div>
</div>
